var resize = require('input-resize');
var view = require('view');

var canvas;
var initd = false;

function onResize(w, h) {
	var dpr = view.pixelRatio || 1;
	if(canvas.width !== w * dpr || canvas.height !== h * dpr) {
		canvas.style.width = w + 'px';
		canvas.style.height = h + 'px';
		canvas.width = w * dpr;
		canvas.height = h * dpr;
	}
}

function init() {
	if(initd) return;
	initd = true;

	canvas = document.createElement("canvas");
	var dpr = window.devicePixelRatio;
	canvas.width = window.innerWidth * dpr;
	canvas.height = window.innerHeight * dpr;
	var style = canvas.style;
	style.position = "absolute";
	style.left = "0px";
	style.top = "0px";
	style.width = canvas.width + 'px';
	style.height = canvas.height + 'px';

	document.body.appendChild(canvas);

	resize.onResize.add(onResize);
	resize.bump(onResize);

	module.exports.canvas = canvas;
	delete module.exports.init;
}

module.exports = {
	init: init
};

//hooks
