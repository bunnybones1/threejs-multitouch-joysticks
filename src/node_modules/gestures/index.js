var initd = false;

var touch = require('input/touch');
var world = require('world');

// var draw = require('./draw');
var target = require('./target');
// var walk = require('./walk');

function registerGesture(gesture) {
	touch.registerHandler(gesture);
	world.registerCameraOffsetCallback(gesture.updateCameraOffset);
	return gesture;
}

function init() {
	if(initd) return;
	initd = true;

	exports.target = registerGesture(target);

	exports.onEnterFrame = onEnterFrame;

	delete exports.init;
}

function onEnterFrame() {
	touch.onEnterFrame();
}

var exports = {
	init: init
};

module.exports = exports;