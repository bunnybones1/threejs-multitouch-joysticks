var defaults = require('lodash.defaults');
var physics = require('physics');
var defaultActorParams = {
	shape: 'circle',
	radius: 200,
	mass: 0.0001,
	density: 0.00001,
	linearDamping: 4,
	x: 500,
	y: 100,
	maskBits: 0,
	categoryBits: 0
};

var tempVec2;
function SeekerPoint(params) {
	params = params || {};
	defaults(params, defaultActorParams);
	this.radius = params.radius;
	this.body = physics.addActor(params);
	if(!params.targetBody) throw new Error('You must provide a target body');
	this.body.SetPosition(params.targetBody.GetPosition());
	this.joint = physics.addJointSpring({
		bodyA: this.body,
		bodyB: params.targetBody
	});
	this.body.bodyMesh.visible = false;
	physics.registerPrePhysics(this.fly.bind(this));
	tempVec2 = physics.getTempVec2();
}

SeekerPoint.prototype.fly = function() {
	tempVec2.x = 0;
	tempVec2.y = 0.0000315;
	this.body.ApplyForce(tempVec2, this.body.GetPosition());
}
module.exports = SeekerPoint;